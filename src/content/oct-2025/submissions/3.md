---
title: Working With the History API
slug: Web/API/History_API/Working_with_the_History_API
page-type: guide
---

{{DefaultAPISidebar("History API")}}

The History API enables a website to interact with a user's browser session history. Browser session history is the list of pages a user has visited in a given window of time. As a user visits new pages, usually by clicking links or using the "Back" and "Forward" buttons, the page is added to the session history.

The main interface defined in the History API is the History interface, and this defines two quite distinct sets of methods:





1.  Methods to navigate to a page in the session history
    * History.back()
    * History.forward()
    * History.go()

2. Methods to modify the session history:
    * History.pushState()
    * History.replaceState()





This guide will cover the second set of methods.

## Modifying Session History

 The `pushState()` method adds a new entry to the session history. The `replaceState()` method updates the session history entry for the current page. Both methods take a `state` parameter which can contain any [serializable object](https://developer.mozilla.org/en-US/docs/Glossary/Serializable_object). When the browser navigates to a history entry, it starts a [`popstate`](https://developer.mozilla.org/en-US/docs/Web/API/Window/popstate_event) event, which contains the state object associated with that entry.



## Single-page Applications and session history

 The main purpose of these APIs is to support websites like [Single-page applications](https://developer.mozilla.org/en-US/docs/Glossary/SPA), which use JavaScript APIs such as `fetch()` to update the page with new content, instead of loading a new page.

 Websites are traditionally implemented as a collection of pages. When users navigate to different parts of the site by clicking links, the browser loads a new page each time. While this is great for many sites, it can have some disadvantages:

  * It can be inefficient to load a whole page every time, when only part of the page needs to be updated.
* It is hard to maintain application state when a user is navigating across pages.

For these reasons, a popular pattern for web apps is the [single-page application](https://developer.mozilla.org/en-US/docs/Glossary/SPA) (SPA). When a user clicks a link, the SPA performs the following steps:

  1. Prevents the default behavior of loading a new page.
  2. [Fetches](https://developer.mozilla.org/en-US/docs/Web/API/Window/fetch) new content to display.
  3. Updates the page with the new content.

  For example,

    [I can't get this code to copy and paste the right way- maybe I need a Markup refresher or to sit down with it more. ]


In this click handler, if the link contains a data attribute `"data-creature"` then we use the value of that attribute to fetch a JSON file containing the new content for the page.

The JSON file might look like this:


    [code]


Our `displayContent()` function updates the page with the JSON:

    [code]



The problem is that it breaks the expected behavior of the browser's "Back" and "Forward" buttons.

From the user's point of view, they clicked a link and the page updated, so it looks like a new page. If they then press the browser's "Back" button, they expect to go to the state before they clicked the link.

But as far as the browser is concerned, the last link didn't load a new page, so "Back" will take the browser to whichever page was loaded before the user opened the SPA.
